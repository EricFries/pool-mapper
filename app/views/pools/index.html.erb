<script type="text/javascript">

	var mapOptions = {
	center: { lat: 40.7033127, lng: -73.979681},
	zoom: 11
	};

	var map = new google.maps.Map(document.getElementById('map-canvas'),
mapOptions);

var infowindow = {};

	<% @pools.each do |pool| %>

	 infowindow["<%= pool[:name].tr('^A-Za-z0-9', '') %>"] = new google.maps.InfoWindow({
      content: "<%= pool[:name] %> <br> <%= pool[:location] %>"
  });

	var myLatlng = new google.maps.LatLng(<%= pool[:lat] %>, <%= pool[:lon] %>);

	var <%= pool[:name].tr('^A-Za-z0-9', '') %> = new google.maps.Marker({
      position: myLatlng,
      map: map,
       animation: google.maps.Animation.DROP,
      title: "<%= pool[:name] %>"
  });

  google.maps.event.addListener(<%= pool[:name].tr('^A-Za-z0-9', '') %>, 'click', function() {
	    infowindow.<%= pool[:name].tr('^A-Za-z0-9', '') %>.open(map, <%= pool[:name].tr('^A-Za-z0-9', '') %>);
	  });

  <% end %>
  </script>




        